<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì„œë¨¸í ë¶•ë¶•ë²„ìŠ¤</title>
    
    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ë¶•ë¶•ë²„ìŠ¤">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- ì•„ì´ì½˜ ì„¤ì • -->
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            max-height: 100vh;
            font-size: 18px;
            /* PWA ì „ì²´í™”ë©´ ìµœì í™” */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
            /* ìŠ¤í¬ë¡¤ ë°”ìš´ìŠ¤ ì™„ì „ ì°¨ë‹¨ */
            overscroll-behavior: none;
            overscroll-behavior-y: none;
            overscroll-behavior-x: none;
            -webkit-overscroll-behavior: none;
            -webkit-overscroll-behavior-y: none;
            -webkit-overscroll-behavior-x: none;
            /* iOS Safari ìŠ¤í¬ë¡¤ ë°”ìš´ìŠ¤ ì°¨ë‹¨ */
            -webkit-overflow-scrolling: auto;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        /* PWA ìƒíƒœí‘œì‹œì¤„ ì˜ì—­ ê³ ë ¤ */
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            height: 100vh;
            max-height: 100vh;
            display: flex;
            flex-direction: column;
            /* ìƒíƒœí‘œì‹œì¤„ ì˜ì—­ ê³ ë ¤ */
            padding-top: max(20px, env(safe-area-inset-top));
            padding-bottom: max(20px, env(safe-area-inset-bottom));
            padding-left: max(20px, env(safe-area-inset-left));
            padding-right: max(20px, env(safe-area-inset-right));
            /* ìŠ¤í¬ë¡¤ ì™„ì „ ì°¨ë‹¨ */
            overflow: hidden;
            position: relative;
        }

        /* í—¤ë” */
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .app-title {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .date-time {
            font-size: 20px;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
        }

        /* ë©”ì¸ ë²„íŠ¼ ì˜ì—­ */
        .main-buttons {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }

        .mode-button {
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 20px;
            padding: 30px;
            font-size: 32px;
            font-weight: bold;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .mode-button:active {
            transform: translateY(0);
        }

        .mode-button.go-school {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .mode-button.go-home {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .mode-button.manage {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        /* í•˜ë‹¨ ì •ë³´ */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .driver-info {
            font-size: 20px;
            font-weight: bold;
            color: #4a5568;
        }

        /* íŒì—… ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        /* ë“±ì›/í•˜ì› ë¦¬ìŠ¤íŠ¸ìš© ì „ì²´í™”ë©´ ëª¨ë‹¬ */
        .modal-content.fullscreen {
            margin: 0;
            width: 100%;
            height: 100%;
            max-height: 100vh;
            border-radius: 0;
            display: flex;
            flex-direction: column;
        }

        .modal-content.fullscreen .modal-header {
            flex-shrink: 0;
            padding: 25px 20px;
            font-size: 28px;
        }

        .modal-content.fullscreen .modal-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: none;
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            position: relative;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        /* ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
        .list-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .child-name {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 12px;
        }

        .time-location {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .name-time {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .time {
            font-size: 22px;
            font-weight: bold;
            color: #4299e1;
            background: #e6f3ff;
            padding: 8px 16px;
            border-radius: 10px;
        }

        .location {
            font-size: 24px;
            color: #718096;
            font-weight: bold;
            padding-left: 5px;
        }

        /* ê´€ë¦¬ ëª¨ë‹¬ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
        .manage-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 80px;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            filter: brightness(110%);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 20px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #718096;
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .empty-state .message {
            font-size: 20px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 480px) {
            body {
                height: 100vh;
                max-height: 100vh;
                overflow: hidden;
                position: fixed;
            }
            
            .container {
                padding: 15px;
                height: 100vh;
                max-height: 100vh;
                overflow: hidden;
            }
            
            .mode-button {
                font-size: 28px;
                padding: 25px;
                min-height: 100px;
            }
            
            .modal-content {
                width: 100%;
                height: 100%;
                margin: 0;
                border-radius: 0;
                max-height: 100vh;
                display: flex;
                flex-direction: column;
            }
            
            .modal-header {
                flex-shrink: 0;
                padding: 25px 20px;
                font-size: 28px;
            }
            
            .modal-body {
                flex: 1;
                padding: 20px;
                overflow-y: auto;
                max-height: none;
            }
            
            .time-location {
                flex-direction: column;
                gap: 8px;
            }
            
            .location {
                text-align: left;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="app-title">ì„œë¨¸í ë¶•ë¶•ë²„ìŠ¤</div>
            <div class="date-time" id="dateTime">2024ë…„ 3ì›” 15ì¼ (ê¸ˆ)</div>
            <div class="current-time" id="currentTime">ì˜¤ì „ 08:30</div>
        </div>

        <!-- ë©”ì¸ ë²„íŠ¼ë“¤ -->
        <div class="main-buttons">
            <button class="mode-button go-school" onclick="openModal('go-school')">
                ğŸšŒ ë“±ì›
            </button>
            <button class="mode-button go-home" onclick="openModal('go-home')">
                ğŸ  í•˜ì›
            </button>
            <button class="mode-button manage" onclick="openModal('manage')">
                âš™ï¸ ê´€ë¦¬
            </button>
        </div>

    </div>

    <!-- ë“±ì› ëª¨ë‹¬ -->
    <div id="goSchoolModal" class="modal">
        <div class="modal-content fullscreen">
            <div class="modal-header">
                ğŸšŒ ë“±ì› ë¦¬ìŠ¤íŠ¸
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="goSchoolList">
                <!-- ë“±ì› ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- í•˜ì› ëª¨ë‹¬ -->
    <div id="goHomeModal" class="modal">
        <div class="modal-content fullscreen">
            <div class="modal-header">
                ğŸ  í•˜ì› ë¦¬ìŠ¤íŠ¸
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="goHomeList">
                <!-- í•˜ì› ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ ëª¨ë‹¬ -->
    <div id="manageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                âš™ï¸ ì•„ì´ ì •ë³´ ê´€ë¦¬
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="manage-buttons">
                    <button class="btn btn-primary" onclick="showAddForm()">ì•„ì´ ì¶”ê°€</button>
                    <button class="btn btn-success" onclick="showFileUpload()">íŒŒì¼ ì—…ë¡œë“œ</button>
                    <button class="btn btn-danger" onclick="showSettings()">ì„¤ì •</button>
                </div>
                
                <div id="addForm" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">ìƒˆ ì•„ì´ ì¶”ê°€</h3>
                    <div class="form-group">
                        <label for="childName">ì•„ì´ ì´ë¦„</label>
                        <input type="text" id="childName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="goSchoolTime">ë“±ì› ì‹œê°„</label>
                        <input type="time" id="goSchoolTime" value="08:00">
                    </div>
                    <div class="form-group">
                        <label for="goSchoolLocation">ë“±ì› ì¥ì†Œ</label>
                        <input type="text" id="goSchoolLocation" placeholder="ë“±ì› ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="goHomeTime">í•˜ì› ì‹œê°„</label>
                        <input type="time" id="goHomeTime" value="14:00">
                    </div>
                    <div class="form-group">
                        <label for="goHomeLocation">í•˜ì› ì¥ì†Œ</label>
                        <input type="text" id="goHomeLocation" placeholder="í•˜ì› ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveChild()">ì €ì¥</button>
                        <button class="btn btn-danger" onclick="cancelAdd()">ì·¨ì†Œ</button>
                    </div>
                </div>

                <div id="fileUploadForm" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2d3748; font-size: 20px;">íŒŒì¼ë¡œ ì¼ê´„ ì—…ë°ì´íŠ¸</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px; color: #4a5568; font-size: 18px;">ğŸ“„ íŒŒì¼ í˜•ì‹ ì•ˆë‚´</h4>
                        <div style="font-size: 16px; color: #718096; line-height: 1.6;">
                            <p style="margin-bottom: 10px;"><strong>í…ìŠ¤íŠ¸ íŒŒì¼(.txt)</strong>ë¡œ ì¤€ë¹„í•´ì£¼ì„¸ìš”.</p>
                            <p style="margin-bottom: 10px;"><strong>í•œ ì¤„ì— í•œ ëª…ì”©</strong> ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ì„±:</p>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0; font-family: monospace; font-size: 14px;">
                                ì´ë¦„,ë“±ì›ì‹œê°„,ë“±ì›ì¥ì†Œ,í•˜ì›ì‹œê°„,í•˜ì›ì¥ì†Œ<br>
                                ê¹€ë¯¼ìˆ˜,08:30,ì•„íŒŒíŠ¸ ì •ë¬¸,14:30,ì•„íŒŒíŠ¸ ì •ë¬¸<br>
                                ì´í•˜ëŠ˜,08:35,ë†€ì´í„°,14:35,ë†€ì´í„°
                            </div>
                            <p style="color: #e53e3e; font-weight: bold;">âš ï¸ ê¸°ì¡´ ë°ì´í„°ëŠ” ëª¨ë‘ ì‚­ì œë˜ê³  ìƒˆ ë°ì´í„°ë¡œ êµì²´ë©ë‹ˆë‹¤!</p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fileInput">í…ìŠ¤íŠ¸ íŒŒì¼ ì„ íƒ</label>
                        <input type="file" id="fileInput" accept=".txt" style="font-size: 18px; padding: 10px;">
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="uploadFile()">ì—…ë¡œë“œ</button>
                        <button class="btn btn-danger" onclick="cancelFileUpload()">ì·¨ì†Œ</button>
                    </div>
                </div>

                <div id="settingsForm" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">ê¸°ë³¸ ì„¤ì •</h3>
                    <div class="form-group">
                        <label for="settingDriverName">ìš´ì „ê¸°ì‚¬ ì´ë¦„</label>
                        <input type="text" id="settingDriverName" placeholder="ê¸°ì‚¬ë‹˜ ì´ë¦„">
                    </div>
                    <div class="form-group">
                        <label for="settingBusNumber">ì°¨ëŸ‰ ë²ˆí˜¸</label>
                        <input type="text" id="settingBusNumber" placeholder="ì°¨ëŸ‰ ë²ˆí˜¸">
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveSettings()">ì €ì¥</button>
                        <button class="btn btn-danger" onclick="cancelSettings()">ì·¨ì†Œ</button>
                    </div>
                </div>

                <div id="childrenList">
                    <!-- ì•„ì´ë“¤ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ
        let childrenData = [];
        let settings = {
            driverName: 'ê¹€ìš´ì „',
            busNumber: '1í˜¸ì°¨'
        };

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateDateTime();
            updateDriverInfo();
            setInterval(updateDateTime, 1000); // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
            
            // í™”ë©´ êº¼ì§ ë°©ì§€
            if ('wakeLock' in navigator) {
                navigator.wakeLock.request('screen');
            }
            
            // Service Worker ë“±ë¡ (PWA)
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('Service Worker ë“±ë¡ ì„±ê³µ:', registration);
                    })
                    .catch(function(error) {
                        console.log('Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                    });
            }
            
            // ìŠ¤í¬ë¡¤ ë°”ìš´ìŠ¤ ì™„ì „ ì°¨ë‹¨
            document.body.addEventListener('touchmove', function(e) {
                // ëª¨ë‹¬ì´ ì—´ë ¤ìˆì„ ë•Œë§Œ ìŠ¤í¬ë¡¤ í—ˆìš©
                const openModal = document.querySelector('.modal[style*="display: block"]');
                if (!openModal) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // iOS Safari ì£¼ì†Œì°½ ìˆ¨ê¸°ê¸°
            window.addEventListener('load', function() {
                setTimeout(function() {
                    window.scrollTo(0, 1);
                }, 100);
            });
        });

        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            const savedData = localStorage.getItem('kindergartenBusData');
            const savedSettings = localStorage.getItem('kindergartenBusSettings');
            
            if (savedData) {
                childrenData = JSON.parse(savedData);
            } else {
                // ì´ˆê¸° ë°ëª¨ ë°ì´í„°
                childrenData = [
                    {
                        id: 1,
                        name: 'ê¹€ë¯¼ìˆ˜',
                        goSchool: { time: '08:30', location: 'ì•„íŒŒíŠ¸ ì •ë¬¸' },
                        goHome: { time: '14:30', location: 'ì•„íŒŒíŠ¸ ì •ë¬¸' }
                    },
                    {
                        id: 2,
                        name: 'ì´í•˜ëŠ˜',
                        goSchool: { time: '08:35', location: 'ë†€ì´í„°' },
                        goHome: { time: '14:35', location: 'ë†€ì´í„°' }
                    },
                    {
                        id: 3,
                        name: 'ë°•ì§€ìš°',
                        goSchool: { time: '08:45', location: '204ë™' },
                        goHome: { time: '14:45', location: '204ë™' }
                    }
                ];
            }
            
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
            }
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('kindergartenBusData', JSON.stringify(childrenData));
            localStorage.setItem('kindergartenBusSettings', JSON.stringify(settings));
        }

        // ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateDateTime() {
            const now = new Date();
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const day = days[now.getDay()];
            
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours < 12 ? 'ì˜¤ì „' : 'ì˜¤í›„';
            const displayHours = hours % 12 || 12;
            
            document.getElementById('dateTime').textContent = `${year}ë…„ ${month}ì›” ${date}ì¼ (${day})`;
            document.getElementById('currentTime').textContent = `${ampm} ${displayHours}:${minutes}`;
        }

        // ìš´ì „ê¸°ì‚¬ ì •ë³´ ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œì—ë§Œ)
        function updateDriverInfo() {
            // í•˜ë‹¨ ì •ë³´ê°€ ì œê±°ë˜ì—ˆìœ¼ë¯€ë¡œ ë¹ˆ í•¨ìˆ˜ë¡œ ìœ ì§€
            return;
        }

        // ëª¨ë‹¬ ì—´ê¸°
        function openModal(type) {
            const modal = document.getElementById(type === 'go-school' ? 'goSchoolModal' : 
                                               type === 'go-home' ? 'goHomeModal' : 'manageModal');
            modal.style.display = 'block';
            
            if (type === 'go-school') {
                renderGoSchoolList();
            } else if (type === 'go-home') {
                renderGoHomeList();
            } else if (type === 'manage') {
                renderManageList();
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => modal.style.display = 'none');
            hideAllForms();
        }

        // ë“±ì› ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderGoSchoolList() {
            const container = document.getElementById('goSchoolList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ê´€ë¦¬ ë©”ë‰´ì—ì„œ ì•„ì´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedData = [...childrenData].sort((a, b) => a.goSchool.time.localeCompare(b.goSchool.time));
            
            container.innerHTML = sortedData.map(child => `
                <div class="list-item">
                    <div class="name-time">
                        <div class="child-name">${child.name}</div>
                        <div class="time">ì˜¤ì „ ${child.goSchool.time}</div>
                    </div>
                    <div class="location">ğŸ“ ${child.goSchool.location}</div>
                </div>
            `).join('');
        }

        // í•˜ì› ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderGoHomeList() {
            const container = document.getElementById('goHomeList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ê´€ë¦¬ ë©”ë‰´ì—ì„œ ì•„ì´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedData = [...childrenData].sort((a, b) => a.goHome.time.localeCompare(b.goHome.time));
            
            container.innerHTML = sortedData.map(child => `
                <div class="list-item">
                    <div class="name-time">
                        <div class="child-name">${child.name}</div>
                        <div class="time">ì˜¤í›„ ${child.goHome.time}</div>
                    </div>
                    <div class="location">ğŸ“ ${child.goHome.location}</div>
                </div>
            `).join('');
        }

        // ê´€ë¦¬ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderManageList() {
            const container = document.getElementById('childrenList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ìœ„ì˜ "ì•„ì´ ì¶”ê°€" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <h3 style="margin: 20px 0; color: #2d3748; font-size: 20px;">ë“±ë¡ëœ ì•„ì´ë“¤</h3>
                ${childrenData.map(child => `
                    <div class="list-item">
                        <div class="child-name">${child.name}</div>
                        <div style="margin-top: 10px; font-size: 20px; color: #718096;">
                            <div>ë“±ì›: ${child.goSchool.time} | ${child.goSchool.location}</div>
                            <div>í•˜ì›: ${child.goHome.time} | ${child.goHome.location}</div>
                        </div>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-primary" onclick="editChild(${child.id})" style="margin-right: 10px; font-size: 18px; padding: 8px 15px;">ìˆ˜ì •</button>
                            <button class="btn btn-danger" onclick="deleteChild(${child.id})" style="font-size: 18px; padding: 8px 15px;">ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // í¼ í‘œì‹œ/ìˆ¨ê¹€ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function hideAllForms() {
            document.getElementById('addForm').style.display = 'none';
            document.getElementById('fileUploadForm').style.display = 'none';
            document.getElementById('settingsForm').style.display = 'none';
        }

        function showAddForm() {
            hideAllForms();
            document.getElementById('addForm').style.display = 'block';
            clearAddForm();
        }

        function showFileUpload() {
            hideAllForms();
            document.getElementById('fileUploadForm').style.display = 'block';
            document.getElementById('fileInput').value = '';
        }

        function showSettings() {
            hideAllForms();
            document.getElementById('settingsForm').style.display = 'block';
            document.getElementById('settingDriverName').value = settings.driverName;
            document.getElementById('settingBusNumber').value = settings.busNumber;
        }

        function clearAddForm() {
            document.getElementById('childName').value = '';
            document.getElementById('goSchoolTime').value = '08:00';
            document.getElementById('goSchoolLocation').value = '';
            document.getElementById('goHomeTime').value = '14:00';
            document.getElementById('goHomeLocation').value = '';
        }

        function cancelAdd() {
            hideAllForms();
            renderManageList();
        }

        function cancelFileUpload() {
            hideAllForms();
            renderManageList();
        }

        function cancelSettings() {
            hideAllForms();
        }

        // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                showAlert('íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!file.name.endsWith('.txt')) {
                showAlert('í…ìŠ¤íŠ¸ íŒŒì¼(.txt)ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                parseFileContent(content);
            };
            reader.readAsText(file, 'UTF-8');
        }
        
        // íŒŒì¼ ë‚´ìš© íŒŒì‹±
        function parseFileContent(content) {
            const lines = content.split('\n').filter(line => line.trim() !== '');
            const newChildrenData = [];
            let errorCount = 0;
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                const parts = line.split(',').map(part => part.trim());
                
                if (parts.length !== 5) {
                    errorCount++;
                    continue;
                }
                
                const [name, goSchoolTime, goSchoolLocation, goHomeTime, goHomeLocation] = parts;
                
                if (!name || !goSchoolTime || !goSchoolLocation || !goHomeTime || !goHomeLocation) {
                    errorCount++;
                    continue;
                }
                
                // ì‹œê°„ í˜•ì‹ ê²€ì¦ (HH:MM)
                const timeRegex = /^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/;
                if (!timeRegex.test(goSchoolTime) || !timeRegex.test(goHomeTime)) {
                    errorCount++;
                    continue;
                }
                
                newChildrenData.push({
                    id: Date.now() + i,
                    name: name,
                    goSchool: { time: goSchoolTime, location: goSchoolLocation },
                    goHome: { time: goHomeTime, location: goHomeLocation }
                });
            }
            
            if (newChildrenData.length === 0) {
                showAlert('ì˜¬ë°”ë¥¸ í˜•ì‹ì˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.\n\ní˜•ì‹: ì´ë¦„,ë“±ì›ì‹œê°„,ë“±ì›ì¥ì†Œ,í•˜ì›ì‹œê°„,í•˜ì›ì¥ì†Œ\nì˜ˆì‹œ: ê¹€ë¯¼ìˆ˜,08:30,ì•„íŒŒíŠ¸ ì •ë¬¸,14:30,ì•„íŒŒíŠ¸ ì •ë¬¸');
                return;
            }
            
            const message = `${newChildrenData.length}ëª…ì˜ ì•„ì´ ì •ë³´ë¥¼ ì—…ë¡œë“œí•©ë‹ˆë‹¤.` + 
                          (errorCount > 0 ? `\n(${errorCount}ì¤„ì€ í˜•ì‹ ì˜¤ë¥˜ë¡œ ì œì™¸ë¨)` : '') +
                          '\n\nê¸°ì¡´ ë°ì´í„°ëŠ” ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?';
                          
            showConfirm(message, function() {
                childrenData = newChildrenData;
                saveData();
                hideAllForms();
                renderManageList();
                showAlert(`${newChildrenData.length}ëª…ì˜ ì•„ì´ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!`);
            });
        }

        // ì»¤ìŠ¤í…€ alert í•¨ìˆ˜
        function showAlert(message) {
            // ê¸°ì¡´ ì•Œë¦¼ì´ ìˆë‹¤ë©´ ì œê±°
            const existingAlert = document.querySelector('.custom-alert');
            if (existingAlert) {
                existingAlert.remove();
            }
            
            // ìƒˆë¡œìš´ ì•Œë¦¼ ìƒì„±
            const alertDiv = document.createElement('div');
            alertDiv.className = 'custom-alert';
            alertDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                z-index: 2000;
                text-align: center;
                min-width: 300px;
                max-width: 90%;
            `;
            
            alertDiv.innerHTML = `
                <div style="font-size: 20px; color: #2d3748; margin-bottom: 20px; line-height: 1.5;">
                    ${message}
                </div>
                <button onclick="this.parentElement.remove()" style="
                    background: #4299e1;
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 8px;
                    font-size: 20px;
                    font-weight: bold;
                    cursor: pointer;
                ">í™•ì¸</button>
            `;
            
            document.body.appendChild(alertDiv);
        }

        // ì»¤ìŠ¤í…€ confirm í•¨ìˆ˜
        function showConfirm(message, onConfirm) {
            // ê¸°ì¡´ ì•Œë¦¼ì´ ìˆë‹¤ë©´ ì œê±°
            const existingAlert = document.querySelector('.custom-alert');
            if (existingAlert) {
                existingAlert.remove();
            }
            
            // ìƒˆë¡œìš´ í™•ì¸ì°½ ìƒì„±
            const confirmDiv = document.createElement('div');
            confirmDiv.className = 'custom-alert';
            confirmDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                z-index: 2000;
                text-align: center;
                min-width: 300px;
                max-width: 90%;
            `;
            
            confirmDiv.innerHTML = `
                <div style="font-size: 20px; color: #2d3748; margin-bottom: 20px; line-height: 1.5;">
                    ${message}
                </div>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="confirm-yes" style="
                        background: #f56565;
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 8px;
                        font-size: 20px;
                        font-weight: bold;
                        cursor: pointer;
                    ">í™•ì¸</button>
                    <button class="confirm-no" style="
                        background: #718096;
                        color: white;
                        border: none;
                        padding: 12px 24px;
                        border-radius: 8px;
                        font-size: 20px;
                        font-weight: bold;
                        cursor: pointer;
                    ">ì·¨ì†Œ</button>
                </div>
            `;
            
            document.body.appendChild(confirmDiv);
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            confirmDiv.querySelector('.confirm-yes').onclick = function() {
                confirmDiv.remove();
                onConfirm();
            };
            
            confirmDiv.querySelector('.confirm-no').onclick = function() {
                confirmDiv.remove();
            };
        }

        // ì•„ì´ ì €ì¥
        function saveChild() {
            const name = document.getElementById('childName').value.trim();
            const goSchoolTime = document.getElementById('goSchoolTime').value;
            const goSchoolLocation = document.getElementById('goSchoolLocation').value.trim();
            const goHomeTime = document.getElementById('goHomeTime').value;
            const goHomeLocation = document.getElementById('goHomeLocation').value.trim();
            
            if (!name || !goSchoolLocation || !goHomeLocation) {
                showAlert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const newChild = {
                id: Date.now(),
                name: name,
                goSchool: { time: goSchoolTime, location: goSchoolLocation },
                goHome: { time: goHomeTime, location: goHomeLocation }
            };
            
            childrenData.push(newChild);
            saveData();
            hideAllForms();
            renderManageList();
            showAlert('ì•„ì´ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì„¤ì • ì €ì¥
        function saveSettings() {
            const driverName = document.getElementById('settingDriverName').value.trim();
            const busNumber = document.getElementById('settingBusNumber').value.trim();
            
            if (!driverName || !busNumber) {
                showAlert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            settings.driverName = driverName;
            settings.busNumber = busNumber;
            saveData();
            updateDriverInfo();
            hideAllForms();
            showAlert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì•„ì´ ì‚­ì œ
        function deleteChild(id) {
            showConfirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?', function() {
                childrenData = childrenData.filter(child => child.id !== id);
                saveData();
                renderManageList();
                showAlert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            });
        }

        // ì•„ì´ ìˆ˜ì •
        function editChild(id) {
            const child = childrenData.find(c => c.id === id);
            if (!child) return;
            
            // ìˆ˜ì • í¼ì„ ëª¨ë‹¬ë¡œ ìƒì„±
            const editModal = document.createElement('div');
            editModal.className = 'modal';
            editModal.style.display = 'block';
            
            editModal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        âœï¸ ì•„ì´ ì •ë³´ ìˆ˜ì •
                        <span class="close" onclick="this.closest('.modal').remove()">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>ì•„ì´ ì´ë¦„</label>
                            <input type="text" id="editChildName" value="${child.name}" style="font-size: 20px;">
                        </div>
                        <div class="form-group">
                            <label>ë“±ì› ì‹œê°„</label>
                            <input type="time" id="editGoSchoolTime" value="${child.goSchool.time}" style="font-size: 20px;">
                        </div>
                        <div class="form-group">
                            <label>ë“±ì› ì¥ì†Œ</label>
                            <input type="text" id="editGoSchoolLocation" value="${child.goSchool.location}" style="font-size: 20px;">
                        </div>
                        <div class="form-group">
                            <label>í•˜ì› ì‹œê°„</label>
                            <input type="time" id="editGoHomeTime" value="${child.goHome.time}" style="font-size: 20px;">
                        </div>
                        <div class="form-group">
                            <label>í•˜ì› ì¥ì†Œ</label>
                            <input type="text" id="editGoHomeLocation" value="${child.goHome.location}" style="font-size: 20px;">
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="saveEditChild(${child.id})">ì €ì¥</button>
                            <button class="btn btn-danger" onclick="this.closest('.modal').remove()">ì·¨ì†Œ</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(editModal);
        }

        // ìˆ˜ì •ëœ ì•„ì´ ì •ë³´ ì €ì¥
        function saveEditChild(id) {
            const child = childrenData.find(c => c.id === id);
            if (!child) return;
            
            const name = document.getElementById('editChildName').value.trim();
            const goSchoolTime = document.getElementById('editGoSchoolTime').value;
            const goSchoolLocation = document.getElementById('editGoSchoolLocation').value.trim();
            const goHomeTime = document.getElementById('editGoHomeTime').value;
            const goHomeLocation = document.getElementById('editGoHomeLocation').value.trim();
            
            if (!name || !goSchoolLocation || !goHomeLocation) {
                showAlert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            child.name = name;
            child.goSchool.time = goSchoolTime;
            child.goSchool.location = goSchoolLocation;
            child.goHome.time = goHomeTime;
            child.goHome.location = goHomeLocation;
            
            saveData();
            renderManageList();
            document.querySelector('.modal').remove();
            showAlert('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    closeModal();
                }
            });
        }
    </script>
</body>
</html><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–´ë¦°ì´ì§‘ ì°¨ëŸ‰ ìš´í–‰ ê´€ë¦¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            font-size: 18px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* í—¤ë” */
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .date-time {
            font-size: 24px;
            font-weight: bold;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 28px;
            font-weight: bold;
            color: #2d3748;
        }

        /* ë©”ì¸ ë²„íŠ¼ ì˜ì—­ */
        .main-buttons {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }

        .mode-button {
            background: rgba(255, 255, 255, 0.95);
            border: none;
            border-radius: 20px;
            padding: 30px;
            font-size: 32px;
            font-weight: bold;
            color: #2d3748;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mode-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .mode-button:active {
            transform: translateY(0);
        }

        .mode-button.go-school {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .mode-button.go-home {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .mode-button.manage {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }

        /* í•˜ë‹¨ ì •ë³´ */
        .footer {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .driver-info {
            font-size: 20px;
            font-weight: bold;
            color: #4a5568;
        }

        /* íŒì—… ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            position: relative;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .modal-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        /* ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ */
        .list-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .child-name {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .time-location {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .time {
            font-size: 20px;
            font-weight: bold;
            color: #4299e1;
            background: #e6f3ff;
            padding: 8px 15px;
            border-radius: 10px;
        }

        .location {
            font-size: 18px;
            color: #718096;
            flex: 1;
            min-width: 120px;
            text-align: right;
        }

        /* ê´€ë¦¬ ëª¨ë‹¬ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
        .manage-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 80px;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            filter: brightness(110%);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2d3748;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 18px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #718096;
        }

        .empty-state .icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .empty-state .message {
            font-size: 18px;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .mode-button {
                font-size: 28px;
                padding: 25px;
                min-height: 100px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .time-location {
                flex-direction: column;
                gap: 8px;
            }
            
            .location {
                text-align: left;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="date-time" id="dateTime">2024ë…„ 3ì›” 15ì¼ (ê¸ˆ)</div>
            <div class="current-time" id="currentTime">ì˜¤ì „ 08:30</div>
        </div>

        <!-- ë©”ì¸ ë²„íŠ¼ë“¤ -->
        <div class="main-buttons">
            <button class="mode-button go-school" onclick="openModal('go-school')">
                ğŸšŒ ë“±ì›
            </button>
            <button class="mode-button go-home" onclick="openModal('go-home')">
                ğŸ  í•˜ì›
            </button>
            <button class="mode-button manage" onclick="openModal('manage')">
                âš™ï¸ ê´€ë¦¬
            </button>
        </div>

        <!-- í•˜ë‹¨ ì •ë³´ -->
        <div class="footer">
            <div class="driver-info" id="driverInfo">
                <span id="driverName">ê¹€ìš´ì „</span> ê¸°ì‚¬ë‹˜ | 
                <span id="busNumber">1í˜¸ì°¨</span>
            </div>
        </div>
    </div>

    <!-- ë“±ì› ëª¨ë‹¬ -->
    <div id="goSchoolModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                ğŸšŒ ë“±ì› ë¦¬ìŠ¤íŠ¸
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="goSchoolList">
                <!-- ë“±ì› ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- í•˜ì› ëª¨ë‹¬ -->
    <div id="goHomeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                ğŸ  í•˜ì› ë¦¬ìŠ¤íŠ¸
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="goHomeList">
                <!-- í•˜ì› ë¦¬ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ ëª¨ë‹¬ -->
    <div id="manageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                âš™ï¸ ì•„ì´ ì •ë³´ ê´€ë¦¬
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="manage-buttons">
                    <button class="btn btn-primary" onclick="showAddForm()">ì•„ì´ ì¶”ê°€</button>
                    <button class="btn btn-success" onclick="showSettings()">ì„¤ì •</button>
                </div>
                
                <div id="addForm" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">ìƒˆ ì•„ì´ ì¶”ê°€</h3>
                    <div class="form-group">
                        <label for="childName">ì•„ì´ ì´ë¦„</label>
                        <input type="text" id="childName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="goSchoolTime">ë“±ì› ì‹œê°„</label>
                        <input type="time" id="goSchoolTime" value="08:00">
                    </div>
                    <div class="form-group">
                        <label for="goSchoolLocation">ë“±ì› ì¥ì†Œ</label>
                        <input type="text" id="goSchoolLocation" placeholder="ë“±ì› ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div class="form-group">
                        <label for="goHomeTime">í•˜ì› ì‹œê°„</label>
                        <input type="time" id="goHomeTime" value="14:00">
                    </div>
                    <div class="form-group">
                        <label for="goHomeLocation">í•˜ì› ì¥ì†Œ</label>
                        <input type="text" id="goHomeLocation" placeholder="í•˜ì› ì¥ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveChild()">ì €ì¥</button>
                        <button class="btn btn-danger" onclick="cancelAdd()">ì·¨ì†Œ</button>
                    </div>
                </div>

                <div id="settingsForm" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">ê¸°ë³¸ ì„¤ì •</h3>
                    <div class="form-group">
                        <label for="settingDriverName">ìš´ì „ê¸°ì‚¬ ì´ë¦„</label>
                        <input type="text" id="settingDriverName" placeholder="ê¸°ì‚¬ë‹˜ ì´ë¦„">
                    </div>
                    <div class="form-group">
                        <label for="settingBusNumber">ì°¨ëŸ‰ ë²ˆí˜¸</label>
                        <input type="text" id="settingBusNumber" placeholder="ì°¨ëŸ‰ ë²ˆí˜¸">
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-success" onclick="saveSettings()">ì €ì¥</button>
                        <button class="btn btn-danger" onclick="cancelSettings()">ì·¨ì†Œ</button>
                    </div>
                </div>

                <div id="childrenList">
                    <!-- ì•„ì´ë“¤ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ
        let childrenData = [];
        let settings = {
            driverName: 'ê¹€ìš´ì „',
            busNumber: '1í˜¸ì°¨'
        };

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateDateTime();
            updateDriverInfo();
            setInterval(updateDateTime, 1000); // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
            
            // í™”ë©´ êº¼ì§ ë°©ì§€
            if ('wakeLock' in navigator) {
                navigator.wakeLock.request('screen');
            }
        });

        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            const savedData = localStorage.getItem('kindergartenBusData');
            const savedSettings = localStorage.getItem('kindergartenBusSettings');
            
            if (savedData) {
                childrenData = JSON.parse(savedData);
            } else {
                // ì´ˆê¸° ë°ëª¨ ë°ì´í„°
                childrenData = [
                    {
                        id: 1,
                        name: 'ê¹€ë¯¼ìˆ˜',
                        goSchool: { time: '08:30', location: 'ì•„íŒŒíŠ¸ ì •ë¬¸' },
                        goHome: { time: '14:30', location: 'ì•„íŒŒíŠ¸ ì •ë¬¸' }
                    },
                    {
                        id: 2,
                        name: 'ì´í•˜ëŠ˜',
                        goSchool: { time: '08:35', location: 'ë†€ì´í„°' },
                        goHome: { time: '14:35', location: 'ë†€ì´í„°' }
                    },
                    {
                        id: 3,
                        name: 'ë°•ì§€ìš°',
                        goSchool: { time: '08:45', location: '204ë™' },
                        goHome: { time: '14:45', location: '204ë™' }
                    }
                ];
            }
            
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
            }
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('kindergartenBusData', JSON.stringify(childrenData));
            localStorage.setItem('kindergartenBusSettings', JSON.stringify(settings));
        }

        // ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateDateTime() {
            const now = new Date();
            const days = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const day = days[now.getDay()];
            
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours < 12 ? 'ì˜¤ì „' : 'ì˜¤í›„';
            const displayHours = hours % 12 || 12;
            
            document.getElementById('dateTime').textContent = `${year}ë…„ ${month}ì›” ${date}ì¼ (${day})`;
            document.getElementById('currentTime').textContent = `${ampm} ${displayHours}:${minutes}`;
        }

        // ìš´ì „ê¸°ì‚¬ ì •ë³´ ì—…ë°ì´íŠ¸
        function updateDriverInfo() {
            document.getElementById('driverName').textContent = settings.driverName;
            document.getElementById('busNumber').textContent = settings.busNumber;
        }

        // ëª¨ë‹¬ ì—´ê¸°
        function openModal(type) {
            const modal = document.getElementById(type === 'go-school' ? 'goSchoolModal' : 
                                               type === 'go-home' ? 'goHomeModal' : 'manageModal');
            modal.style.display = 'block';
            
            if (type === 'go-school') {
                renderGoSchoolList();
            } else if (type === 'go-home') {
                renderGoHomeList();
            } else if (type === 'manage') {
                renderManageList();
            }
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => modal.style.display = 'none');
            hideAllForms();
        }

        // ë“±ì› ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderGoSchoolList() {
            const container = document.getElementById('goSchoolList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ê´€ë¦¬ ë©”ë‰´ì—ì„œ ì•„ì´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedData = [...childrenData].sort((a, b) => a.goSchool.time.localeCompare(b.goSchool.time));
            
            container.innerHTML = sortedData.map(child => `
                <div class="list-item">
                    <div class="child-name">${child.name}</div>
                    <div class="time-location">
                        <div class="time">ì˜¤ì „ ${child.goSchool.time}</div>
                        <div class="location">ğŸ“ ${child.goSchool.location}</div>
                    </div>
                </div>
            `).join('');
        }

        // í•˜ì› ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderGoHomeList() {
            const container = document.getElementById('goHomeList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ê´€ë¦¬ ë©”ë‰´ì—ì„œ ì•„ì´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
            const sortedData = [...childrenData].sort((a, b) => a.goHome.time.localeCompare(b.goHome.time));
            
            container.innerHTML = sortedData.map(child => `
                <div class="list-item">
                    <div class="child-name">${child.name}</div>
                    <div class="time-location">
                        <div class="time">ì˜¤í›„ ${child.goHome.time}</div>
                        <div class="location">ğŸ“ ${child.goHome.location}</div>
                    </div>
                </div>
            `).join('');
        }

        // ê´€ë¦¬ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§
        function renderManageList() {
            const container = document.getElementById('childrenList');
            
            if (childrenData.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ‘¶</div>
                        <div class="message">ë“±ë¡ëœ ì•„ì´ê°€ ì—†ìŠµë‹ˆë‹¤.<br>ìœ„ì˜ "ì•„ì´ ì¶”ê°€" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <h3 style="margin: 20px 0; color: #2d3748;">ë“±ë¡ëœ ì•„ì´ë“¤</h3>
                ${childrenData.map(child => `
                    <div class="list-item">
                        <div class="child-name">${child.name}</div>
                        <div style="margin-top: 10px; font-size: 16px; color: #718096;">
                            <div>ë“±ì›: ${child.goSchool.time} | ${child.goSchool.location}</div>
                            <div>í•˜ì›: ${child.goHome.time} | ${child.goHome.location}</div>
                        </div>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-primary" onclick="editChild(${child.id})" style="margin-right: 10px; font-size: 14px; padding: 8px 15px;">ìˆ˜ì •</button>
                            <button class="btn btn-danger" onclick="deleteChild(${child.id})" style="font-size: 14px; padding: 8px 15px;">ì‚­ì œ</button>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // í¼ í‘œì‹œ/ìˆ¨ê¹€ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function hideAllForms() {
            document.getElementById('addForm').style.display = 'none';
            document.getElementById('settingsForm').style.display = 'none';
        }

        function showAddForm() {
            hideAllForms();
            document.getElementById('addForm').style.display = 'block';
            clearAddForm();
        }

        function showSettings() {
            hideAllForms();
            document.getElementById('settingsForm').style.display = 'block';
            document.getElementById('settingDriverName').value = settings.driverName;
            document.getElementById('settingBusNumber').value = settings.busNumber;
        }

        function clearAddForm() {
            document.getElementById('childName').value = '';
            document.getElementById('goSchoolTime').value = '08:00';
            document.getElementById('goSchoolLocation').value = '';
            document.getElementById('goHomeTime').value = '14:00';
            document.getElementById('goHomeLocation').value = '';
        }

        function cancelAdd() {
            hideAllForms();
            renderManageList();
        }

        function cancelSettings() {
            hideAllForms();
        }

        // ì•„ì´ ì €ì¥
        function saveChild() {
            const name = document.getElementById('childName').value.trim();
            const goSchoolTime = document.getElementById('goSchoolTime').value;
            const goSchoolLocation = document.getElementById('goSchoolLocation').value.trim();
            const goHomeTime = document.getElementById('goHomeTime').value;
            const goHomeLocation = document.getElementById('goHomeLocation').value.trim();
            
            if (!name || !goSchoolLocation || !goHomeLocation) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const newChild = {
                id: Date.now(),
                name: name,
                goSchool: { time: goSchoolTime, location: goSchoolLocation },
                goHome: { time: goHomeTime, location: goHomeLocation }
            };
            
            childrenData.push(newChild);
            saveData();
            hideAllForms();
            renderManageList();
            alert('ì•„ì´ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì„¤ì • ì €ì¥
        function saveSettings() {
            const driverName = document.getElementById('settingDriverName').value.trim();
            const busNumber = document.getElementById('settingBusNumber').value.trim();
            
            if (!driverName || !busNumber) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            settings.driverName = driverName;
            settings.busNumber = busNumber;
            saveData();
            updateDriverInfo();
            hideAllForms();
            alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì•„ì´ ì‚­ì œ
        function deleteChild(id) {
            if (confirm('ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                childrenData = childrenData.filter(child => child.id !== id);
                saveData();
                renderManageList();
                alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì•„ì´ ìˆ˜ì • (ê°„ë‹¨í•œ êµ¬í˜„)
        function editChild(id) {
            const child = childrenData.find(c => c.id === id);
            if (!child) return;
            
            const newName = prompt('ì´ë¦„:', child.name);
            if (newName === null) return;
            
            const newGoSchoolTime = prompt('ë“±ì› ì‹œê°„ (HH:MM):', child.goSchool.time);
            if (newGoSchoolTime === null) return;
            
            const newGoSchoolLocation = prompt('ë“±ì› ì¥ì†Œ:', child.goSchool.location);
            if (newGoSchoolLocation === null) return;
            
            const newGoHomeTime = prompt('í•˜ì› ì‹œê°„ (HH:MM):', child.goHome.time);
            if (newGoHomeTime === null) return;
            
            const newGoHomeLocation = prompt('í•˜ì› ì¥ì†Œ:', child.goHome.location);
            if (newGoHomeLocation === null) return;
            
            child.name = newName.trim();
            child.goSchool.time = newGoSchoolTime;
            child.goSchool.location = newGoSchoolLocation.trim();
            child.goHome.time = newGoHomeTime;
            child.goHome.location = newGoHomeLocation.trim();
            
            saveData();
            renderManageList();
            alert('ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    closeModal();
                }
            });
        }
    </script>
</body>
</html>
